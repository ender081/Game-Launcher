<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game</title>
<style>
body { margin:0; display:flex; justify-content:center; align-items:center; flex-direction:column; height:100vh; background:#0f172a; color:white; font-family:'Segoe UI',sans-serif; }
canvas { background:#1e293b; border-radius:16px; display:block; margin:10px auto; }
.controls { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin-top:10px; }
button { padding:10px 16px; border:none; border-radius:8px; background:#06b6d4; color:#0f172a; font-weight:bold; font-size:16px; cursor:pointer; }
#restart, #start { margin-top:10px; }
</style>
</head>
<body>

<canvas id="game" width="400" height="400"></canvas>

<div class="controls">
  <button onclick="changeDir('up')">⬆️</button>
</div>
<div class="controls">
  <button onclick="changeDir('left')">⬅️</button>
  <button onclick="changeDir('down')">⬇️</button>
  <button onclick="changeDir('right')">➡️</button>
</div>

<button id="start">Start</button>
<button id="restart" style="display:none;" onclick="restartGame()">Main Lagi</button>
<button id="back" onclick="window.location='index.html'" style="margin-top:15px; padding:8px 12px; border:none; border-radius:8px; background:#06b6d4; color:#0f172a; font-weight:bold; cursor:pointer;">Back to Game Launcher</button>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const box = 20;
let snake = [{x:9*box, y:10*box}];
let food = {x:Math.floor(Math.random()*20)*box, y:Math.floor(Math.random()*20)*box};
let dir = "";
let game;

function draw(){
  ctx.fillStyle="#1e293b";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  snake.forEach((s,index)=>{
    ctx.fillStyle=index===0?'#06b6d4':'#0ea5e9';
    ctx.fillRect(s.x,s.y,box,box);
  });

  ctx.fillStyle="#f43f5e";
  ctx.fillRect(food.x,food.y,box,box);
}

function update(){
  const head = {...snake[0]};
  if(dir==='up') head.y -= box;
  if(dir==='down') head.y += box;
  if(dir==='left') head.x -= box;
  if(dir==='right') head.x += box;

  // cek tabrakan
  if(head.x<0||head.y<0||head.x>=canvas.width||head.y>=canvas.height || snake.some(s=>s.x===head.x && s.y===head.y)){
    clearInterval(game);
    document.getElementById('restart').style.display='inline-block';
    return;
  }

  snake.unshift(head);
  if(head.x===food.x && head.y===food.y){
    food={x:Math.floor(Math.random()*20)*box, y:Math.floor(Math.random()*20)*box};
  } else {
    snake.pop();
  }

  draw();
}

function changeDir(d){ dir=d; }

function startGame(){
  document.getElementById('start').style.display='none';
  dir = "";
  snake=[{x:9*box, y:10*box}];
  food={x:Math.floor(Math.random()*20)*box, y:Math.floor(Math.random()*20)*box};
  game=setInterval(update,200);
}

function restartGame(){
  document.getElementById('restart').style.display='none';
  dir = "";
  snake=[{x:9*box, y:10*box}];
  food={x:Math.floor(Math.random()*20)*box, y:Math.floor(Math.random()*20)*box};
  game=setInterval(update,200);
}

document.getElementById('start').addEventListener('click', startGame);

draw();
</script>

</body>
</html>